{"version":3,"file":"appBundle.js","sourceRoot":"","sources":["../../scripts/Game.ts","../../scripts/index.ts"],"names":["MySprite","MySprite.constructor","PhaserGame","PhaserGame.constructor","PhaserGame.preload","PhaserGame33","PhaserGame33.Application","PhaserGame33.Application.constructor"],"mappings":"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","sourcesContent":["/// <reference path=\"../www/scripts/typings/phaser.d.ts\" />\r\n\r\ninterface ICustomParams {\r\n    health?: number;\r\n    fun?: number;\r\n}\r\n\r\nclass MySprite {\r\n    constructor(object: Phaser.Sprite) {\r\n        this.object = object;\r\n    }\r\n\r\n    customParams: ICustomParams;\r\n    object: Phaser.Sprite;\r\n}\r\n\r\nclass PhaserGame {\r\n    private game: Phaser.Game;\r\n    private background: MySprite;\r\n    \r\n    private boxSprite : Phaser.Sprite;\r\n\r\n    constructor() {\r\n        this.game = new Phaser.Game(window.screen.width, window.screen.height, Phaser.AUTO, \"content\", { preload: () => { this.preload(); }, create: () => { this.create(); }, update: () => { this.update(); }, render: () => { this.render(); } });\r\n    }\r\n    \r\n    preload() {\r\n        var json_obj = JSON.parse(this.Get(\"http://testapi.bigstockphoto.com/2/883610/search/?q=dog\"));\r\n\r\n        var images = new Array<string>();\r\n        for (var i in json_obj.data.images) {\r\n            var image = json_obj.data.images[i].small_thumb.url;\r\n            images.push(image);\r\n        }\r\n\r\n        this.game.load.image(\"background\", \"images/background.jpg\");\r\n        //this.game.load.image(\"box\", \"images/box.jpg\");\r\n        this.game.load.image(\"box\", images[0]);\r\n    }\r\n\r\n    create = () => {\r\n        this.game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;\r\n        \r\n        this.background = new MySprite(this.game.add.sprite(0, 0, \"background\"));\r\n        this.background.object.inputEnabled = true;\r\n        this.background.object.scale.setTo(window.screen.width / this.background.object.width, window.screen.height / this.background.object.height);\r\n\r\n        var group = this.game.add.group();\r\n        group.inputEnableChildren = true;\r\n\r\n        var screenRectangle = new Phaser.Rectangle(0, 0, window.screen.width, window.screen.height);\r\n        for (let i = 0; i < 3; i++) {\r\n            var added = false;\r\n            while (!added) {\r\n                var addFailed = false;\r\n                var sprite : Phaser.Sprite = group.create(this.game.rnd.integerInRange(0, window.screen.width), this.game.rnd.integerInRange(0, window.screen.height), \"box\");\r\n                sprite.inputEnabled = true;\r\n                sprite.input.enableDrag();\r\n                sprite.input.boundsRect = screenRectangle;\r\n\r\n                var children = group.children as Array<Phaser.Sprite>;\r\n                for (let j in children) {\r\n                    var child = children[j];\r\n                    if (child === sprite)\r\n                        continue;\r\n                        \r\n                    var childRectangle = new Phaser.Rectangle(child.x, child.y, child.width, child.height);\r\n                    var spriteRectangle = new Phaser.Rectangle(sprite.x, sprite.y, child.width, child.height);\r\n                    \r\n                    if (Phaser.Rectangle.intersects(childRectangle, spriteRectangle)) {\r\n                        console.log(\"AddFail: intersects\");\r\n                        group.remove(sprite, true);\r\n                        addFailed = true;\r\n                        break;\r\n                    }\r\n                        \r\n                    if (!screenRectangle.containsRect(spriteRectangle)) {\r\n                        console.log(\"AddFail: !containsRect\");\r\n                        group.remove(sprite, true);\r\n                        addFailed = true;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if (!addFailed)\r\n                    added = true;\r\n            }\r\n        }\r\n\r\n//        sonic.events.onDragStart.add(() => { this.onDragStart(); }, this);\r\n//        sonic.events.onDragStop.add(() => { this.onDragStop(); }, this);\r\n//\r\n//        group.onChildInputDown.add(() => { this.onDown(); }, this);\r\n\r\n\r\n        //var musicFile = new Media(\"http://translate.google.com/translate_tts?ie=UTF-8&total=1&idx=0&textlen=32&client=tw-ob&q=%C5%BBryj%20o%C5%82%C3%B3w%20suko&tl=Pl-pl\", null, null);\r\n        var musicFile = new Media(\"file:///android_asset/www/audio/theme.mp3\", null, null);\r\n        //var musicFile = new Media(\"ms-appdata:///www/audio/theme.mp3\", null, null);\r\n        musicFile.play();\r\n    }\r\n\r\n    private Get = (yourUrl) => {\r\n        var Httpreq = new XMLHttpRequest(); // a new request\r\n        Httpreq.open(\"GET\", yourUrl, false);\r\n        Httpreq.send(null);\r\n        return Httpreq.responseText;\r\n\r\n    }\r\n\r\n    render = () => {\r\n    }\r\n    \r\n    update = () => {\r\n    }\r\n}\r\n","// For an introduction to the Blank template, see the following documentation:\r\n// http://go.microsoft.com/fwlink/?LinkID=397705\r\n// To debug code on page load in Ripple or on Android devices/emulators: launch your app, set breakpoints, \r\n// and then run \"window.location.reload()\" in the JavaScript Console.\r\n\r\n\r\n/// <reference path=\"Game.ts\" />\r\nmodule PhaserGame33 {\r\n    \"use strict\";\r\n\r\n    class Application {\r\n\r\n        public initialize = () => {\r\n            document.addEventListener('deviceready', this.onDeviceReady, false);\r\n        }\r\n\r\n        private onDeviceReady = () => {\r\n        }\r\n    }\r\n\r\n    window.onload = () => {\r\n        var game = new PhaserGame();\r\n    }\r\n}\r\n"]}